<DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" type="text/css" href="mobile_gyro.css">
	<title>Transition</title>
<script>
	function mousey(event){
		//document.getElementById("ave_xy").innerHTML = "mousey hit " + event.pageX + "X " + event.pageY + "Y";
	}

	rt = false // boolean for rotate status

	var qqq = {}

	function init() {
		
		//document.getElementById("ave_xy").innerHTML = "mousey hit " + event.pageX + "X " + event.pageY + "Y";
		var dataContainerOrientation = document.getElementById('dataContainerOrientation');
		// var dataContainerMotion = document.getElementById('dataContainerMotion');

		// if(window.DeviceOrientationEvent) {

		window.addEventListener('deviceorientation', function(event) {

                alpha = event.alpha;
                beta = event.beta;
                gamma = event.gamma;

			rrr = 0

		                qqq.alpha = -alpha
		                qqq.beta = -beta
		                qqq.gamma = -gamma

		                Object.freeze(qqq)
		    // Object freeze is the starting position
		    // Numbers ID prints out data in real time
		 document.getElementById("numbers").innerHTML = "ALPHA " + Math.round(alpha) + " BETA " + Math.round(beta) + " GAMMA " + Math.round(gamma) + ".... QQQa " + qqq.alpha + " QQQb " + qqq.beta + " QQQg " + qqq.gamma;

		var lef = 250 

		// document.getElementById("rotate_square").style.left = -(qqq.gamma + gamma)*3 + lef + "px";

		var top = -100

		if (rt===false){
			document.getElementById("rotate_square").style.left = 70 +(qqq.gamma + gamma)*5 + lef + "px";
			document.getElementById("rotate_square").style.top = -350 -540 +(qqq.beta + beta)*5 + top + "px";

		// lines 52 and 53 below are original opposite direction.
			// document.getElementById("rotate_square").style.left = 70 -(qqq.gamma + gamma)*5 + lef + "px";
			// document.getElementById("rotate_square").style.top = -350 -540 -(qqq.beta + beta)*5 + top + "px";
		// I only changed the '-'' in front of qqq parens


			//document.getElementById("rotate_square").style.top =  qqq.beta*3+beta + window.innerHeight/10 + "px";

			document.getElementById("ave").style.left = -200 +(qqq.gamma + gamma)*2 + lef + "px";
			document.getElementById("ave").style.top = -285 -340 +(qqq.beta + beta)*2 + top + "px";

			document.getElementById("ave1").style.left = -155 -20 +(qqq.gamma + gamma)*1.5 + lef + "px";
			document.getElementById("ave1").style.top = -80 -130 +(qqq.beta + beta)*1.5 + top + "px";

			document.getElementById("ave2").style.left = -150 +(qqq.gamma + gamma) + lef + "px";
			document.getElementById("ave2").style.top = 100 + 60 +(qqq.beta + beta) + top + "px";

			return;
		} else {
			// var top = 250
			// var lef = -100

			// I made no + - changes to the ELSE code after switching directions above
			document.getElementById("rotate_square").style.left = 70 + (qqq.beta - beta)*5 + lef + "px";
			document.getElementById("rotate_square").style.top = -350 -540 + (qqq.gamma + gamma)*5 + top + "px";

			document.getElementById("ave").style.left = -200 + (qqq.beta - beta)*2 + lef + "px";
			document.getElementById("ave").style.top = -285 -340 + (qqq.gamma + gamma)*2 + top + "px";

			document.getElementById("ave1").style.left = -155 -20 + (qqq.beta - beta)*1.5 + lef + "px";
			document.getElementById("ave1").style.top = -80 -130 + (qqq.gamma + gamma)*1.5 + top + "px";

			document.getElementById("ave2").style.left = -150 + (qqq.beta - beta) + lef + "px";
			document.getElementById("ave2").style.top = 100 + 60 + (qqq.gamma + gamma) + top + "px";
		}

		        if(alpha!=null || beta!=null || gamma!=null) 
	                 dataContainerOrientation.innerHTML = '<strong>Orientation</strong><br />alpha: ' + (alpha+qqq.alpha) + '<br/>beta: ' + (beta+qqq.beta) + '<br />gamma: ' + (gamma+qqq.gamma);
	            }, false);
		}

</script>
</head>
<!-- 	<body id="body_id" onload="init()" onmousedown="mousey(event)" ontouchstart="mousey(event)"> -->
	<body id="body_id" onload="init()">
		<div id="reset" onclick="reset(event)" ontouchstart="reset(event)">RESET DEVICE ORIENTATION</div>
		<div id="rot" onclick="rot()" ontouchstart="rot()">ROTATE 90&#176;</div>
		<div id="numbers"></div>
		<div id="dataContainerOrientation">
	<!-- 	No device orientation data -->
		</div>
	<!-- 	<div id="dataContainerMotion"> -->
<!-- 		No device motion data -->
	<!-- 	</div> -->
		<div id="ave2"></div>
		<div id="ave1"></div>
		<div id="ave"></div>

 		<div id="rotate_square"></div>
<!-- 		<div id="rotate_square2"></div> -->

</body>		
<script>
	rt = false // boolean for rotate status

	function rot(){
		//document.getElementById('ave_xy').innerHTML = "You hit rotate"
		if (rt===false){
			document.getElementById('body_id').style.top = "-350px";
			document.getElementById('body_id').style.left = "-400px";
			document.getElementById('body_id').style.transform = "rotate(90deg)";
			document.getElementById("body_id").style.webkitTransform = "rotate(90deg)";
			document.getElementById("body_id").style.mozTransform = "rotate(90deg)";
			// note - you may also need -moz-transform and -webkit-transform
			return rt = true 
		} else {
			document.getElementById('body_id').style.top = "0px";
			document.getElementById('body_id').style.left = "0px";
			document.getElementById('body_id').style.transform = "rotate(0deg)";
			document.getElementById("body_id").style.webkitTransform = "rotate(0deg)";
			document.getElementById("body_id").style.mozTransform = "rotate(0deg)";
			// note - you may also need -moz-transform and -webkit-transform
			rt = false
		}
	}

// gamma = 0 + c
// 0 = gamma - c
// c = 0 - gamma
	function reset(event){
		delete qqq
		qqq = {}
        qqq.alpha = -alpha
        qqq.beta = -beta
        qqq.gamma = -gamma
		Object.freeze(qqq)
		var top = -100
		var lef = 250 

		if (rt===false){

			//updating code to change the - + direction
			// changing '-' in front of qqq parens to '+''
			document.getElementById("rotate_square").style.left = 70 +(qqq.gamma + gamma)*5 + lef + "px";
			document.getElementById("rotate_square").style.top = -350 -540 +(qqq.beta + beta)*5 + top + "px";
			//document.getElementById("rotate_square").style.top =  qqq.beta*3+beta + window.innerHeight/10 + "px";

			document.getElementById("ave").style.left = -200 +(qqq.gamma + gamma)*2 + lef + "px";
			document.getElementById("ave").style.top = -285 -340 +(qqq.beta + beta)*2 + top + "px";

			document.getElementById("ave1").style.left = -155 -20 +(qqq.gamma + gamma)*1.5 + lef + "px";
			document.getElementById("ave1").style.top = -80 -130 +(qqq.beta + beta)*1.5 + top + "px";

			document.getElementById("ave2").style.left = -150 +(qqq.gamma + gamma) + lef + "px";
			document.getElementById("ave2").style.top = 100 + 60 +(qqq.beta + beta) + top + "px";
			return;
		} else {
			// var top = 250
			// var lef = -100

			// made no + or - changes to the ELSE code
			document.getElementById("rotate_square").style.left = 70 + (qqq.beta - beta)*5 + lef + "px";
			document.getElementById("rotate_square").style.top = -350 -540 + (qqq.gamma + gamma)*5 + top + "px";

			document.getElementById("ave").style.left = -200 + (qqq.beta - beta)*2 + lef + "px";
			document.getElementById("ave").style.top = -285 -340 + (qqq.gamma + gamma)*2 + top + "px";

			document.getElementById("ave1").style.left = -155 -20 + (qqq.beta - beta)*1.5 + lef + "px";
			document.getElementById("ave1").style.top = -80 -130 + (qqq.gamma + gamma)*1.5 + top + "px";

			document.getElementById("ave2").style.left = -150 + (qqq.beta - beta) + lef + "px";
			document.getElementById("ave2").style.top = 100 + 60 + (qqq.gamma + gamma) + top + "px";
		}
	};

	document.addEventListener("mousemove", function(event){
	        evx = event.pageX
	        evy = event.pageY
	        //document.getElementById("ave_xy").innerHTML = "mousey hit " + evx + "X " + evy + "Y" + " mousemove"
	});

	document.addEventListener("touchstart", function(){
			// event.preventDefault() ;
			//showCoords();
		    evx = event.pageX
	        evy = event.pageY
	        //document.getElementById("ave_xy").innerHTML = "mousey hit " + evx + "X " + evy + "Y" + " touchstart" 
	});

	document.addEventListener("touchmove", function(){
			// event.preventDefault() ;  // prevents scroll
			//showCoords();
		    evx = event.pageX
	        evy = event.pageY
	        //document.getElementById("ave_xy").innerHTML = "mousey hit " + evx + "X " + evy + "Y" + " touchmove" 
	});

</script>
</html>